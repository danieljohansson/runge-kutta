{"ts":1353773258540,"silentsave":true,"restoring":false,"patch":[[{"diffs":[[1,"\n// ============================================ //\n// Systems\n// ============================================ //\n\nvar stepSize = 0.05;\nvar tSpan = [0, 1];\nvar f = function (t, y) {\n    return [\n        y[1],\n        Math.exp(2*t) * Math.sin(t) - 2*y[0] + 2*y[1]\n    ];\n};\nvar y = function (t) { \n    return [\n        0.2 * Math.exp(2*t) * (Math.sin(t) - 2*Math.cos(t)),\n        0.2 * Math.exp(2*t) * (4*Math.sin(t) - 3*Math.cos(t))\n    ];\n};\nvar y0 = [-0.4, -0.6];\n\nvar sol;\nvar plot1 = new Plot(); plot1.setSize(500, 300);\nvar plot2 = new Plot(); plot2.setSize(500, 300);\nconsole.log(' ');\n\nvar t = linspace(tSpan[0], tSpan[1], 200); \nvar exact = transpose(t.map(y));\nplot1.plot(t, exact[0], 'gray'); // exact\nplot2.plot(t, exact[1], 'darkgray'); // exact\n\nsol = eulerSystem(f, tSpan, y0, stepSize);\nplot1.plot(sol.t, sol.y[0], 'crimson', 'x');\nplot2.plot(sol.t, sol.y[1], 'blue', 'x');\nlogError('euler', sol, y);\n\nsol = rk4System(f, tSpan, y0, 4*stepSize);\nplot1.plot(sol.t, sol.y[0], 'green', 'o');\nplot2.plot(sol.t, sol.y[1], 'purple', 'o');\nlogError('rk4', sol, y);\n\nsol = dp54System(f, tSpan, y0, 1e-3, 0.5);\nplot1.plot(sol.t, sol.y[0], 'royalblue', 'box');\nplot2.plot(sol.t, sol.y[1], 'orange', 'box');\nlogError('dp54', sol, y);\n\n\n\n//*/ ----- preformance test\nvar plot3 = new Plot(); plot3.setSize(500, 300);\ntSpan = [1, 20];\n\nf = function (t, y) { return 2/t*y + t*t*Math.cos(t); };\ny = function (t) { return t*t*(Math.sin(t) + 1 - Math.sin(1)); };\ny0 = 1;\nvar i = 1e4;\ntic('single');\nwhile (i--) {\n    sol = dp54(f, tSpan, y0, 1e-3, 0.5);\n}\ntoc('single');\n\nplot3.plot(linspace(tSpan[0], tSpan[1], 200), linspace(tSpan[0], tSpan[1], 200).map(y), 'rgba(0,0,0,.3)');\n\nplot3.plot(sol.t, sol.y, 'royalblue');\nlogError('dp54', sol, y);\n\nf = function (t, y) { return [2/t*y[0] + t*t*Math.cos(t)]; };\ny = function (t) { return [t*t*(Math.sin(t) + 1 - Math.sin(1))]; };\ny0 = [1];\ni = 1e4;\ntic('system');\nwhile (i--) {\n    sol = dp54System2(f, tSpan, y0, 1e-3, 0.5);\n}\ntoc('system');\n\nplot3.plot(sol.t, sol.y[0], 'red');\nlogError('dp54', sol, y);\n\n//*/\n\n"]],"start1":0,"start2":0,"length1":0,"length2":2054}]],"length":2054}
